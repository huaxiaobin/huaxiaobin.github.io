<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://huaxiaobin.github.io</id>
    <title>HuaYunBin&apos;s Blog</title>
    <updated>2020-02-28T02:48:00.149Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://huaxiaobin.github.io"/>
    <link rel="self" href="https://huaxiaobin.github.io/atom.xml"/>
    <subtitle>Read(); Think(); Try(); Repeat();</subtitle>
    <logo>https://huaxiaobin.github.io/images/avatar.png</logo>
    <icon>https://huaxiaobin.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, HuaYunBin&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[Linux虚拟屏幕Xvfb的介绍]]></title>
        <id>https://huaxiaobin.github.io/post/linux-xu-ni-ping-mu-xvfb-de-jie-shao/</id>
        <link href="https://huaxiaobin.github.io/post/linux-xu-ni-ping-mu-xvfb-de-jie-shao/">
        </link>
        <updated>2020-02-27T17:17:28.000Z</updated>
        <summary type="html"><![CDATA[<p><a href="https://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml">Xvfb</a>是流行的虚拟现实库，可以使很多需要图形界面的程序虚拟运行；</p>
]]></summary>
        <content type="html"><![CDATA[<p><a href="https://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml">Xvfb</a>是流行的虚拟现实库，可以使很多需要图形界面的程序虚拟运行；</p>
<!-- more -->
<h2 id="使用原因">使用原因</h2>
<p>淘宝列表页爬取经常会跳滑动验证码，需要使用puppeteer控制浏览器模拟人工滑动，而在无头模式下，无论怎么滑动都无法通过，必须使用有头模式，而CentOS服务器上没有界面，所以只能使用虚拟屏幕，使浏览器运行在虚拟屏幕上。</p>
<h2 id="安装及使用">安装及使用</h2>
<pre><code class="language-shell"># 安装
yum install Xvfb

# 启动  7:虚拟屏幕id，使用时需要用到；  1336x768x24:屏幕分辨率；
Xvfb :7 -screen 0 1336x768x24 2&gt;/dev/null &amp;

# 使用	启动puppeteer程序前需指定运行在哪个虚拟屏幕上，如下命令，运行在虚拟屏幕id为7的上
export DISPLAY=:7
</code></pre>
<h2 id="远程控制-监控">远程控制、监控</h2>
<p>一般情况下，Xvfb都运行在Linux服务器上，你无法看到虚拟屏幕的运行情况，程序的调试十分麻烦，所以你需要在本地远程连接你服务器上所在的虚拟屏幕，进行监控控制。<br>
<strong>服务器端</strong><br>
x11vnc：远程桌面，可以使人远程连接服务器上的虚拟屏幕；</p>
<pre><code class="language-shell"># 安装 ubuntu
sudo apt install x11vnc
# 安装 centos
yum install -y x11vnc

# 启动  5900:连接端口  password:连接密码  7:虚拟屏幕id
x11vnc -listen 0.0.0.0 -rfbport 5900 -noipv6 -passwd password -display :7
</code></pre>
<p><strong>用户端</strong><br>
可以使用vncviewer工具远程连接。</p>
<h2 id="其它">其它</h2>
<p>python有一个第三方库<code>PyVirtualDisplay</code>，该库可以在python程序中启动指定运行端口xvfb程序，并且可远程监听。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[App反编译工具dex2jar、JD-GUI的使用]]></title>
        <id>https://huaxiaobin.github.io/post/app-fan-bian-yi-gong-ju-dex2jarjd-gui-de-shi-yong/</id>
        <link href="https://huaxiaobin.github.io/post/app-fan-bian-yi-gong-ju-dex2jarjd-gui-de-shi-yong/">
        </link>
        <updated>2020-02-27T16:07:04.000Z</updated>
        <summary type="html"><![CDATA[<p>如今爬虫的开发离不开从App爬取数据，本文将介绍如何使用dex2jar反编译一个Android App以及使用JD-GUI工具查看App源码。</p>
]]></summary>
        <content type="html"><![CDATA[<p>如今爬虫的开发离不开从App爬取数据，本文将介绍如何使用dex2jar反编译一个Android App以及使用JD-GUI工具查看App源码。</p>
<!-- more -->
<h2 id="准备工作">准备工作</h2>
<h3 id="dex2jar下载及安装">dex2jar下载及安装</h3>
<p>可以从<a href="https://sourceforge.net/projects/dex2jar/files/">https://sourceforge.net/projects/dex2jar/files/</a>下载dex2jar，然后解压既可。</p>
<h3 id="jd-gui下载及安装">JD-GUI下载及安装</h3>
<p>可以从<a href="http://java-decompiler.github.io/">http://java-decompiler.github.io/</a>下载JD-GUI工具。</p>
<h2 id="反编译">反编译</h2>
<p>首先准备好你所需要编译的Apk文件；</p>
<h3 id="通过dex2jar反编译apk得到jar文件">通过dex2jar反编译Apk得到jar文件</h3>
<pre><code class="language-shell">cd dex2jar-2.x  #首先cd到dex2jar目录下
sh d2j-dex2jar.sh xxx.apk  #执行shell脚本反编译你的Apk
</code></pre>
<p>运行完毕后会在dex2jar目录下生成反编译后的jar文件<br>
ps-1：执行d2j-dex2jar.sh这一步时，可能会报错，如下<br>
<img src="https://huaxiaobin.github.io/post-images/1582821889509.png" alt="" loading="lazy"><br>
这是因为内存溢出的问题，只需要修改d2j-dex2jar.sh脚本中最大所需内存既可，如下，默认为512m，这里改为了4096m<br>
<img src="https://huaxiaobin.github.io/post-images/1582821895545.png" alt="" loading="lazy"><br>
ps-2：还有可能碰到如下错误<br>
<img src="https://huaxiaobin.github.io/post-images/1582822068157.png" alt="" loading="lazy"><br>
这是因为dex2jar版本较老引起得，需要去下载最新版（可能不好找，2.0版本以上）或者自行编译dex2jar源码，然后重新反编译apk既可；<br>
具体编译方法可看<a href="https://github.com/pxb1988/dex2jar/wiki/BuildFromSource">https://github.com/pxb1988/dex2jar/wiki/BuildFromSource</a></p>
<h3 id="使用jd-gui软件查看app源码">使用JD-GUI软件查看App源码</h3>
<p>直接拖动dex2jar生成的jar文件到JD-GUI中既可，如下：<br>
<img src="https://huaxiaobin.github.io/post-images/1582823038881.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
</feed>